{"ast":null,"code":"import React, { useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport { renderToBody } from './render-to-body';\nexport function renderImperatively(element) {\n  const Wrapper = React.forwardRef((_, ref) => {\n    const [visible, setVisible] = useState(false);\n    const closedRef = useRef(false);\n    useEffect(() => {\n      if (!closedRef.current) {\n        setVisible(true);\n      } else {\n        afterClose();\n      }\n    }, []);\n\n    function onClose() {\n      var _a, _b;\n\n      closedRef.current = true;\n      setVisible(false);\n      (_b = (_a = element.props).onClose) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }\n\n    function afterClose() {\n      var _a, _b;\n\n      unmount();\n      (_b = (_a = element.props).afterClose) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }\n\n    useImperativeHandle(ref, () => ({\n      close: onClose\n    }));\n    return React.cloneElement(element, Object.assign(Object.assign({}, element.props), {\n      visible,\n      onClose,\n      afterClose\n    }));\n  });\n  const wrapperRef = React.createRef();\n  const unmount = renderToBody(React.createElement(Wrapper, {\n    ref: wrapperRef\n  }));\n\n  function close() {\n    var _a;\n\n    (_a = wrapperRef.current) === null || _a === void 0 ? void 0 : _a.close();\n  }\n\n  return {\n    close\n  };\n}","map":{"version":3,"names":["React","useEffect","useImperativeHandle","useRef","useState","renderToBody","renderImperatively","element","Wrapper","forwardRef","_","ref","visible","setVisible","closedRef","current","afterClose","onClose","_a","_b","props","call","unmount","close","cloneElement","Object","assign","wrapperRef","createRef","createElement"],"sources":["/Users/yinyahui/Desktop/weblearn/juejin/react-antd-manage/react-antd-manage/node_modules/_antd-mobile@5.12.6@antd-mobile/es/utils/render-imperatively.js"],"sourcesContent":["import React, { useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport { renderToBody } from './render-to-body';\nexport function renderImperatively(element) {\n  const Wrapper = React.forwardRef((_, ref) => {\n    const [visible, setVisible] = useState(false);\n    const closedRef = useRef(false);\n    useEffect(() => {\n      if (!closedRef.current) {\n        setVisible(true);\n      } else {\n        afterClose();\n      }\n    }, []);\n\n    function onClose() {\n      var _a, _b;\n\n      closedRef.current = true;\n      setVisible(false);\n      (_b = (_a = element.props).onClose) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }\n\n    function afterClose() {\n      var _a, _b;\n\n      unmount();\n      (_b = (_a = element.props).afterClose) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }\n\n    useImperativeHandle(ref, () => ({\n      close: onClose\n    }));\n    return React.cloneElement(element, Object.assign(Object.assign({}, element.props), {\n      visible,\n      onClose,\n      afterClose\n    }));\n  });\n  const wrapperRef = React.createRef();\n  const unmount = renderToBody(React.createElement(Wrapper, {\n    ref: wrapperRef\n  }));\n\n  function close() {\n    var _a;\n\n    (_a = wrapperRef.current) === null || _a === void 0 ? void 0 : _a.close();\n  }\n\n  return {\n    close\n  };\n}"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,mBAA3B,EAAgDC,MAAhD,EAAwDC,QAAxD,QAAwE,OAAxE;AACA,SAASC,YAAT,QAA6B,kBAA7B;AACA,OAAO,SAASC,kBAAT,CAA4BC,OAA5B,EAAqC;EAC1C,MAAMC,OAAO,GAAGR,KAAK,CAACS,UAAN,CAAiB,CAACC,CAAD,EAAIC,GAAJ,KAAY;IAC3C,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBT,QAAQ,CAAC,KAAD,CAAtC;IACA,MAAMU,SAAS,GAAGX,MAAM,CAAC,KAAD,CAAxB;IACAF,SAAS,CAAC,MAAM;MACd,IAAI,CAACa,SAAS,CAACC,OAAf,EAAwB;QACtBF,UAAU,CAAC,IAAD,CAAV;MACD,CAFD,MAEO;QACLG,UAAU;MACX;IACF,CANQ,EAMN,EANM,CAAT;;IAQA,SAASC,OAAT,GAAmB;MACjB,IAAIC,EAAJ,EAAQC,EAAR;;MAEAL,SAAS,CAACC,OAAV,GAAoB,IAApB;MACAF,UAAU,CAAC,KAAD,CAAV;MACA,CAACM,EAAE,GAAG,CAACD,EAAE,GAAGX,OAAO,CAACa,KAAd,EAAqBH,OAA3B,MAAwC,IAAxC,IAAgDE,EAAE,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,EAAE,CAACE,IAAH,CAAQH,EAAR,CAAzE;IACD;;IAED,SAASF,UAAT,GAAsB;MACpB,IAAIE,EAAJ,EAAQC,EAAR;;MAEAG,OAAO;MACP,CAACH,EAAE,GAAG,CAACD,EAAE,GAAGX,OAAO,CAACa,KAAd,EAAqBJ,UAA3B,MAA2C,IAA3C,IAAmDG,EAAE,KAAK,KAAK,CAA/D,GAAmE,KAAK,CAAxE,GAA4EA,EAAE,CAACE,IAAH,CAAQH,EAAR,CAA5E;IACD;;IAEDhB,mBAAmB,CAACS,GAAD,EAAM,OAAO;MAC9BY,KAAK,EAAEN;IADuB,CAAP,CAAN,CAAnB;IAGA,OAAOjB,KAAK,CAACwB,YAAN,CAAmBjB,OAAnB,EAA4BkB,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBnB,OAAO,CAACa,KAA1B,CAAd,EAAgD;MACjFR,OADiF;MAEjFK,OAFiF;MAGjFD;IAHiF,CAAhD,CAA5B,CAAP;EAKD,CAlCe,CAAhB;EAmCA,MAAMW,UAAU,GAAG3B,KAAK,CAAC4B,SAAN,EAAnB;EACA,MAAMN,OAAO,GAAGjB,YAAY,CAACL,KAAK,CAAC6B,aAAN,CAAoBrB,OAApB,EAA6B;IACxDG,GAAG,EAAEgB;EADmD,CAA7B,CAAD,CAA5B;;EAIA,SAASJ,KAAT,GAAiB;IACf,IAAIL,EAAJ;;IAEA,CAACA,EAAE,GAAGS,UAAU,CAACZ,OAAjB,MAA8B,IAA9B,IAAsCG,EAAE,KAAK,KAAK,CAAlD,GAAsD,KAAK,CAA3D,GAA+DA,EAAE,CAACK,KAAH,EAA/D;EACD;;EAED,OAAO;IACLA;EADK,CAAP;AAGD"},"metadata":{},"sourceType":"module"}