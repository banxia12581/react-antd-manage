{"ast":null,"code":"import { withNativeProps } from '../../utils/native-props';\nimport React, { useMemo, useRef, useState } from 'react';\nimport { useUnmountedRef } from 'ahooks';\nimport { useLockScroll } from '../../utils/use-lock-scroll';\nimport { useSpring, animated } from '@react-spring/web';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { useConfig } from '../config-provider';\nimport { useShouldRender } from '../../utils/should-render';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nconst classPrefix = `adm-mask`;\nconst opacityRecord = {\n  default: 0.55,\n  thin: 0.35,\n  thick: 0.75\n};\nconst defaultProps = {\n  visible: true,\n  destroyOnClose: false,\n  forceRender: false,\n  color: 'black',\n  opacity: 'default',\n  disableBodyScroll: true,\n  getContainer: null,\n  stopPropagation: ['click']\n};\nexport const Mask = p => {\n  const props = mergeProps(defaultProps, p);\n  const {\n    locale\n  } = useConfig();\n  const ref = useRef(null);\n  useLockScroll(ref, props.visible && props.disableBodyScroll);\n  const background = useMemo(() => {\n    var _a;\n\n    const opacity = (_a = opacityRecord[props.opacity]) !== null && _a !== void 0 ? _a : props.opacity;\n    const rgb = props.color === 'white' ? '255, 255, 255' : '0, 0, 0';\n    return `rgba(${rgb}, ${opacity})`;\n  }, [props.color, props.opacity]);\n  const [active, setActive] = useState(props.visible);\n  const unmountedRef = useUnmountedRef();\n  const {\n    opacity\n  } = useSpring({\n    opacity: props.visible ? 1 : 0,\n    config: {\n      precision: 0.01,\n      mass: 1,\n      tension: 200,\n      friction: 30,\n      clamp: true\n    },\n    onStart: () => {\n      setActive(true);\n    },\n    onRest: () => {\n      var _a, _b;\n\n      if (unmountedRef.current) return;\n      setActive(props.visible);\n\n      if (props.visible) {\n        (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n      } else {\n        (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    }\n  });\n  const shouldRender = useShouldRender(active, props.forceRender, props.destroyOnClose);\n  const node = withStopPropagation(props.stopPropagation, withNativeProps(props, React.createElement(animated.div, {\n    className: classPrefix,\n    ref: ref,\n    style: Object.assign(Object.assign({\n      background,\n      opacity\n    }, props.style), {\n      display: active ? undefined : 'none'\n    }),\n    onClick: e => {\n      var _a;\n\n      if (e.target === e.currentTarget) {\n        (_a = props.onMaskClick) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      }\n    }\n  }, props.onMaskClick && React.createElement(\"div\", {\n    className: `${classPrefix}-aria-button`,\n    role: 'button',\n    \"aria-label\": locale.Mask.name,\n    onClick: props.onMaskClick\n  }), React.createElement(\"div\", {\n    className: `${classPrefix}-content`\n  }, shouldRender && props.children))));\n  return renderToContainer(props.getContainer, node);\n};","map":{"version":3,"names":["withNativeProps","React","useMemo","useRef","useState","useUnmountedRef","useLockScroll","useSpring","animated","renderToContainer","mergeProps","useConfig","useShouldRender","withStopPropagation","classPrefix","opacityRecord","default","thin","thick","defaultProps","visible","destroyOnClose","forceRender","color","opacity","disableBodyScroll","getContainer","stopPropagation","Mask","p","props","locale","ref","background","_a","rgb","active","setActive","unmountedRef","config","precision","mass","tension","friction","clamp","onStart","onRest","_b","current","afterShow","call","afterClose","shouldRender","node","createElement","div","className","style","Object","assign","display","undefined","onClick","e","target","currentTarget","onMaskClick","role","name","children"],"sources":["/Users/yinyahui/Desktop/weblearn/juejin/react-antd-yyy-zongzi/node_modules/_antd-mobile@5.12.6@antd-mobile/es/components/mask/mask.js"],"sourcesContent":["import { withNativeProps } from '../../utils/native-props';\nimport React, { useMemo, useRef, useState } from 'react';\nimport { useUnmountedRef } from 'ahooks';\nimport { useLockScroll } from '../../utils/use-lock-scroll';\nimport { useSpring, animated } from '@react-spring/web';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { useConfig } from '../config-provider';\nimport { useShouldRender } from '../../utils/should-render';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nconst classPrefix = `adm-mask`;\nconst opacityRecord = {\n  default: 0.55,\n  thin: 0.35,\n  thick: 0.75\n};\nconst defaultProps = {\n  visible: true,\n  destroyOnClose: false,\n  forceRender: false,\n  color: 'black',\n  opacity: 'default',\n  disableBodyScroll: true,\n  getContainer: null,\n  stopPropagation: ['click']\n};\nexport const Mask = p => {\n  const props = mergeProps(defaultProps, p);\n  const {\n    locale\n  } = useConfig();\n  const ref = useRef(null);\n  useLockScroll(ref, props.visible && props.disableBodyScroll);\n  const background = useMemo(() => {\n    var _a;\n\n    const opacity = (_a = opacityRecord[props.opacity]) !== null && _a !== void 0 ? _a : props.opacity;\n    const rgb = props.color === 'white' ? '255, 255, 255' : '0, 0, 0';\n    return `rgba(${rgb}, ${opacity})`;\n  }, [props.color, props.opacity]);\n  const [active, setActive] = useState(props.visible);\n  const unmountedRef = useUnmountedRef();\n  const {\n    opacity\n  } = useSpring({\n    opacity: props.visible ? 1 : 0,\n    config: {\n      precision: 0.01,\n      mass: 1,\n      tension: 200,\n      friction: 30,\n      clamp: true\n    },\n    onStart: () => {\n      setActive(true);\n    },\n    onRest: () => {\n      var _a, _b;\n\n      if (unmountedRef.current) return;\n      setActive(props.visible);\n\n      if (props.visible) {\n        (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n      } else {\n        (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    }\n  });\n  const shouldRender = useShouldRender(active, props.forceRender, props.destroyOnClose);\n  const node = withStopPropagation(props.stopPropagation, withNativeProps(props, React.createElement(animated.div, {\n    className: classPrefix,\n    ref: ref,\n    style: Object.assign(Object.assign({\n      background,\n      opacity\n    }, props.style), {\n      display: active ? undefined : 'none'\n    }),\n    onClick: e => {\n      var _a;\n\n      if (e.target === e.currentTarget) {\n        (_a = props.onMaskClick) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      }\n    }\n  }, props.onMaskClick && React.createElement(\"div\", {\n    className: `${classPrefix}-aria-button`,\n    role: 'button',\n    \"aria-label\": locale.Mask.name,\n    onClick: props.onMaskClick\n  }), React.createElement(\"div\", {\n    className: `${classPrefix}-content`\n  }, shouldRender && props.children))));\n  return renderToContainer(props.getContainer, node);\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}