{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport React, { useState } from 'react';\nimport { mergeProps } from '../../utils/with-default-props';\nimport classNames from 'classnames';\nimport { useUnmountedRef } from 'ahooks';\nimport Mask from '../mask';\nimport { DialogActionButton } from './dialog-action-button';\nimport Image from '../image';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nimport AutoCenter from '../auto-center';\nimport { useSpring, animated } from '@react-spring/web';\nimport { withNativeProps } from '../../utils/native-props';\nconst defaultProps = {\n  visible: false,\n  actions: [],\n  closeOnAction: false,\n  closeOnMaskClick: false,\n  stopPropagation: ['click'],\n  getContainer: null,\n  disableBodyScroll: true\n};\nexport const Dialog = p => {\n  const props = mergeProps(defaultProps, p);\n  const unmountedRef = useUnmountedRef();\n  const style = useSpring({\n    scale: props.visible ? 1 : 0.8,\n    opacity: props.visible ? 1 : 0,\n    config: {\n      mass: 1.2,\n      tension: 200,\n      friction: 25,\n      clamp: true\n    },\n    onStart: () => {\n      setActive(true);\n    },\n    onRest: () => {\n      var _a, _b;\n\n      if (unmountedRef.current) return;\n      setActive(props.visible);\n\n      if (props.visible) {\n        (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n      } else {\n        (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    }\n  });\n  const [active, setActive] = useState(props.visible);\n  const body = React.createElement(\"div\", {\n    className: classNames(cls('body'), props.image && cls('with-image'), props.bodyClassName),\n    style: props.bodyStyle\n  }, !!props.image && React.createElement(\"div\", {\n    className: cls('image-container')\n  }, React.createElement(Image, {\n    src: props.image,\n    alt: 'dialog header image',\n    width: '100%'\n  })), !!props.header && React.createElement(\"div\", {\n    className: cls('header')\n  }, React.createElement(AutoCenter, null, props.header)), !!props.title && React.createElement(\"div\", {\n    className: cls('title')\n  }, props.title), React.createElement(\"div\", {\n    className: classNames(cls('content'), !props.content && cls('content-empty'))\n  }, typeof props.content === 'string' ? React.createElement(AutoCenter, null, props.content) : props.content), React.createElement(\"div\", {\n    className: cls('footer')\n  }, props.actions.map((row, index) => {\n    const actions = Array.isArray(row) ? row : [row];\n    return React.createElement(\"div\", {\n      className: cls('action-row'),\n      key: index\n    }, actions.map((action, index) => React.createElement(DialogActionButton, {\n      key: action.key,\n      action: action,\n      onAction: () => __awaiter(void 0, void 0, void 0, function* () {\n        var _a, _b, _c;\n\n        yield Promise.all([(_a = action.onClick) === null || _a === void 0 ? void 0 : _a.call(action), (_b = props.onAction) === null || _b === void 0 ? void 0 : _b.call(props, action, index)]);\n\n        if (props.closeOnAction) {\n          (_c = props.onClose) === null || _c === void 0 ? void 0 : _c.call(props);\n        }\n      })\n    })));\n  })));\n  const node = withNativeProps(props, React.createElement(\"div\", {\n    className: cls(),\n    style: {\n      display: active ? undefined : 'none'\n    }\n  }, React.createElement(Mask, {\n    visible: props.visible,\n    onMaskClick: props.closeOnMaskClick ? props.onClose : undefined,\n    style: props.maskStyle,\n    className: classNames(cls('mask'), props.maskClassName),\n    disableBodyScroll: props.disableBodyScroll\n  }), React.createElement(\"div\", {\n    className: cls('wrap'),\n    style: {\n      pointerEvents: props.visible ? undefined : 'none'\n    }\n  }, React.createElement(animated.div, {\n    style: style\n  }, body))));\n  return renderToContainer(props.getContainer, withStopPropagation(props.stopPropagation, node));\n};\n\nfunction cls() {\n  let name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return 'adm-dialog' + (name && '-') + name;\n}","map":{"version":3,"names":["__awaiter","React","useState","mergeProps","classNames","useUnmountedRef","Mask","DialogActionButton","Image","renderToContainer","withStopPropagation","AutoCenter","useSpring","animated","withNativeProps","defaultProps","visible","actions","closeOnAction","closeOnMaskClick","stopPropagation","getContainer","disableBodyScroll","Dialog","p","props","unmountedRef","style","scale","opacity","config","mass","tension","friction","clamp","onStart","setActive","onRest","_a","_b","current","afterShow","call","afterClose","active","body","createElement","className","cls","image","bodyClassName","bodyStyle","src","alt","width","header","title","content","map","row","index","Array","isArray","key","action","onAction","_c","Promise","all","onClick","onClose","node","display","undefined","onMaskClick","maskStyle","maskClassName","pointerEvents","div","name"],"sources":["/Users/yinyahui/Desktop/weblearn/juejin/react-antd-yyy-zongzi/node_modules/_antd-mobile@5.12.6@antd-mobile/es/components/dialog/dialog.js"],"sourcesContent":["import { __awaiter } from \"tslib\";\nimport React, { useState } from 'react';\nimport { mergeProps } from '../../utils/with-default-props';\nimport classNames from 'classnames';\nimport { useUnmountedRef } from 'ahooks';\nimport Mask from '../mask';\nimport { DialogActionButton } from './dialog-action-button';\nimport Image from '../image';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nimport AutoCenter from '../auto-center';\nimport { useSpring, animated } from '@react-spring/web';\nimport { withNativeProps } from '../../utils/native-props';\nconst defaultProps = {\n  visible: false,\n  actions: [],\n  closeOnAction: false,\n  closeOnMaskClick: false,\n  stopPropagation: ['click'],\n  getContainer: null,\n  disableBodyScroll: true\n};\nexport const Dialog = p => {\n  const props = mergeProps(defaultProps, p);\n  const unmountedRef = useUnmountedRef();\n  const style = useSpring({\n    scale: props.visible ? 1 : 0.8,\n    opacity: props.visible ? 1 : 0,\n    config: {\n      mass: 1.2,\n      tension: 200,\n      friction: 25,\n      clamp: true\n    },\n    onStart: () => {\n      setActive(true);\n    },\n    onRest: () => {\n      var _a, _b;\n\n      if (unmountedRef.current) return;\n      setActive(props.visible);\n\n      if (props.visible) {\n        (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n      } else {\n        (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    }\n  });\n  const [active, setActive] = useState(props.visible);\n  const body = React.createElement(\"div\", {\n    className: classNames(cls('body'), props.image && cls('with-image'), props.bodyClassName),\n    style: props.bodyStyle\n  }, !!props.image && React.createElement(\"div\", {\n    className: cls('image-container')\n  }, React.createElement(Image, {\n    src: props.image,\n    alt: 'dialog header image',\n    width: '100%'\n  })), !!props.header && React.createElement(\"div\", {\n    className: cls('header')\n  }, React.createElement(AutoCenter, null, props.header)), !!props.title && React.createElement(\"div\", {\n    className: cls('title')\n  }, props.title), React.createElement(\"div\", {\n    className: classNames(cls('content'), !props.content && cls('content-empty'))\n  }, typeof props.content === 'string' ? React.createElement(AutoCenter, null, props.content) : props.content), React.createElement(\"div\", {\n    className: cls('footer')\n  }, props.actions.map((row, index) => {\n    const actions = Array.isArray(row) ? row : [row];\n    return React.createElement(\"div\", {\n      className: cls('action-row'),\n      key: index\n    }, actions.map((action, index) => React.createElement(DialogActionButton, {\n      key: action.key,\n      action: action,\n      onAction: () => __awaiter(void 0, void 0, void 0, function* () {\n        var _a, _b, _c;\n\n        yield Promise.all([(_a = action.onClick) === null || _a === void 0 ? void 0 : _a.call(action), (_b = props.onAction) === null || _b === void 0 ? void 0 : _b.call(props, action, index)]);\n\n        if (props.closeOnAction) {\n          (_c = props.onClose) === null || _c === void 0 ? void 0 : _c.call(props);\n        }\n      })\n    })));\n  })));\n  const node = withNativeProps(props, React.createElement(\"div\", {\n    className: cls(),\n    style: {\n      display: active ? undefined : 'none'\n    }\n  }, React.createElement(Mask, {\n    visible: props.visible,\n    onMaskClick: props.closeOnMaskClick ? props.onClose : undefined,\n    style: props.maskStyle,\n    className: classNames(cls('mask'), props.maskClassName),\n    disableBodyScroll: props.disableBodyScroll\n  }), React.createElement(\"div\", {\n    className: cls('wrap'),\n    style: {\n      pointerEvents: props.visible ? undefined : 'none'\n    }\n  }, React.createElement(animated.div, {\n    style: style\n  }, body))));\n  return renderToContainer(props.getContainer, withStopPropagation(props.stopPropagation, node));\n};\n\nfunction cls(name = '') {\n  return 'adm-dialog' + (name && '-') + name;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}